import{c as M,j as e,S as E,Z as o,r as n,P as I,B as g,K as w,T as v}from"./index-Bl7e71Vh.js";import{C as R,a as W}from"./axios-7CtpZq3G.js";import{F as P,I as F,S as z,T as D}from"./TextField-CE67gVZw.js";import{G as j}from"./Grid2-CoTXUmv6.js";import"./useFormControl-De7Bs7VM.js";import"./isMuiElement-CHw8Zwd_.js";const G=M(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function A({data:r=[],value:i=[],keyField:t="id",onChange:u,disabled:c=!1,label:d="",name:p="",dropdownValue:f="",readonly:x=!1,required:y=!1,showClearButton:h=!0}){const k=()=>{u({target:{value:""}})};return e.jsxs(P,{required:y,size:"small",fullWidth:!0,children:[e.jsx(F,{children:d}),e.jsx(z,{label:d,value:i,onChange:u,disabled:c,readOnly:x,endAdornment:!x&&i!==""&&h&&e.jsx(E,{onClick:k,sx:{mr:1},children:e.jsx(G,{})}),children:r==null?void 0:r.map((a,b)=>e.jsx(o,{value:a==null?void 0:a[f],children:a==null?void 0:a[p]},(a==null?void 0:a[t])||b))})]})}const L=[{name:"Any",value:"Any"},{name:"Programming",value:"Programming"},{name:"Miscellaneous",value:"Miscellaneous"},{name:"Dark",value:"Dark"},{name:"Pun",value:"Pun"},{name:"Spooky",value:"Spooky"},{name:"Christmas",value:"Christmas"}];function q(){const[r,i]=n.useState([]),[t,u]=n.useState(!1),[c,d]=n.useState(null),[p,f]=n.useState("Any"),[x,y]=n.useState([]),[h,k]=n.useState("Any"),[a,b]=n.useState(1),[J,S]=n.useState([]),C=async()=>{u(!0),d(null),S([]);try{const s=x.join(","),l=await W.get(`https://v2.jokeapi.dev/joke/${p}`,{params:{type:h!=="Any"?h:void 0,amount:a>1?a:void 0,blacklistFlags:s||void 0}});if((l==null?void 0:l.status)===200){const m=Array.isArray(l.data.jokes)?l.data.jokes:[l.data];i(m),S(new Array(m.length).fill(!1))}else throw new Error("Failed to fetch jokes.")}catch(s){d(s.message||"An error occurred while fetching jokes."),i([])}finally{u(!1)}},T=s=>{S(l=>l.map((m,B)=>B===s?!m:m))};return n.useEffect(()=>{C()},[]),e.jsxs(I,{elevation:4,sx:{borderRadius:2,p:3,boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease-in-out",":hover":{boxShadow:"0px 6px 16px rgba(0, 0, 0, 0.2)"}},children:[e.jsx(g,{children:e.jsxs(j,{container:!0,spacing:2,children:[e.jsx(j,{size:{xs:12,sm:12,md:6,lg:3},children:e.jsx(A,{data:L,onChange:s=>f(s.target.value),value:p,dropdownValue:"value",name:"name",label:"Joke Category",showClearButton:!1})}),e.jsx(j,{size:{xs:12,sm:12,md:6,lg:3},children:e.jsx(A,{data:[{name:"Any",value:"Any"},{name:"Single",value:"single"},{name:"Two Part",value:"twopart"}],value:h,onChange:s=>k(s.target.value),name:"name",dropdownValue:"value",showClearButton:!1,label:"Joke Type"})}),e.jsx(j,{size:{xs:12,sm:12,md:6,lg:3},children:e.jsxs(P,{size:"small",fullWidth:!0,sx:{minWidth:120},children:[e.jsx(F,{children:"Flags"}),e.jsxs(z,{multiple:!0,value:x,label:"Flags",onChange:s=>y(s.target.value),children:[e.jsx(o,{value:"nsfw",children:"NSFW"}),e.jsx(o,{value:"religious",children:"Religious"}),e.jsx(o,{value:"political",children:"Political"}),e.jsx(o,{value:"racist",children:"Racist"}),e.jsx(o,{value:"sexist",children:"Sexist"})]})]})}),e.jsx(j,{size:{xs:12,sm:12,md:6,lg:3},children:e.jsx(D,{label:"Number of Jokes",type:"number",fullWidth:!0,size:"small",value:a,onChange:s=>b(Math.max(1,Math.min(10,+s.target.value)))})})]})}),e.jsx(g,{sx:{textAlign:"center",mb:3,mt:2},children:e.jsx(w,{variant:"contained",onClick:C,disabled:t,children:t?"Loading...":"Get Jokes"})}),t&&e.jsx(g,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(R,{})}),c&&e.jsx(v,{color:"error",variant:"subtitle1",sx:{mt:2},children:c}),!t&&!c&&r.length>0&&e.jsx(g,{children:r.map((s,l)=>e.jsx(g,{sx:{mb:3,border:"1px solid rgba(0,0,0,0.2)",p:2,borderRadius:1},children:s.type==="twopart"?e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"h6",sx:{mb:1},children:s.setup}),J[l]?e.jsx(v,{variant:"subtitle1",color:"text.secondary",children:s.delivery}):e.jsx(w,{variant:"outlined",onClick:()=>T(l),children:"Show Punchline"})]}):e.jsx(v,{variant:"h6",children:s.joke})},l))})]})}export{q as default};
