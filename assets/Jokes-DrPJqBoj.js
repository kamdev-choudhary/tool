import{r as t,j as e,P as T,B as l,M as n,v as b,T as u}from"./index-DzEDZhAG.js";import{a as z}from"./axios-upsvKRUO.js";import{C as k}from"./CustomDropDown-7_4mabmQ.js";import{G as o}from"./Grid2-BCRgiC8g.js";import{F as M,I as B,S as E}from"./Select-BQ19XVxF.js";import{T as R}from"./TextField-iLokFg54.js";import{C as D}from"./CircularProgress-zyFti9yw.js";import"./isMuiElement-B5IWVfvk.js";import"./useFormControl-BMp-715j.js";const W=[{name:"Any",value:"Any"},{name:"Programming",value:"Programming"},{name:"Miscellaneous",value:"Miscellaneous"},{name:"Dark",value:"Dark"},{name:"Pun",value:"Pun"},{name:"Spooky",value:"Spooky"},{name:"Christmas",value:"Christmas"}];function O(){const[h,g]=t.useState([]),[i,p]=t.useState(!1),[c,j]=t.useState(null),[v,S]=t.useState("Any"),[y,C]=t.useState([]),[m,w]=t.useState("Any"),[d,A]=t.useState(1),[P,x]=t.useState([]),f=async()=>{p(!0),j(null),x([]);try{const a=y.join(","),s=await z.get(`https://v2.jokeapi.dev/joke/${v}`,{params:{type:m!=="Any"?m:void 0,amount:d>1?d:void 0,blacklistFlags:a||void 0}});if((s==null?void 0:s.status)===200){const r=Array.isArray(s.data.jokes)?s.data.jokes:[s.data];g(r),x(new Array(r.length).fill(!1))}else throw new Error("Failed to fetch jokes.")}catch(a){j(a.message||"An error occurred while fetching jokes."),g([])}finally{p(!1)}},F=a=>{x(s=>s.map((r,J)=>J===a?!r:r))};return t.useEffect(()=>{f()},[]),e.jsxs(T,{elevation:4,sx:{borderRadius:2,p:3,boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease-in-out",":hover":{boxShadow:"0px 6px 16px rgba(0, 0, 0, 0.2)"}},children:[e.jsx(l,{children:e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{size:{xs:12,sm:12,md:6,lg:3},children:e.jsx(k,{data:W,onChange:a=>S(a.target.value),value:v,dropdownValue:"value",name:"name",label:"Joke Category",showClearButton:!1})}),e.jsx(o,{size:{xs:12,sm:12,md:6,lg:3},children:e.jsx(k,{data:[{name:"Any",value:"Any"},{name:"Single",value:"single"},{name:"Two Part",value:"twopart"}],value:m,onChange:a=>w(a.target.value),name:"name",dropdownValue:"value",showClearButton:!1,label:"Joke Type"})}),e.jsx(o,{size:{xs:12,sm:12,md:6,lg:3},children:e.jsxs(M,{size:"small",fullWidth:!0,sx:{minWidth:120},children:[e.jsx(B,{children:"Flags"}),e.jsxs(E,{multiple:!0,value:y,label:"Flags",onChange:a=>C(a.target.value),children:[e.jsx(n,{value:"nsfw",children:"NSFW"}),e.jsx(n,{value:"religious",children:"Religious"}),e.jsx(n,{value:"political",children:"Political"}),e.jsx(n,{value:"racist",children:"Racist"}),e.jsx(n,{value:"sexist",children:"Sexist"})]})]})}),e.jsx(o,{size:{xs:12,sm:12,md:6,lg:3},children:e.jsx(R,{label:"Number of Jokes",type:"number",fullWidth:!0,size:"small",value:d,onChange:a=>A(Math.max(1,Math.min(10,+a.target.value)))})})]})}),e.jsx(l,{sx:{textAlign:"center",mb:3,mt:2},children:e.jsx(b,{variant:"contained",onClick:f,disabled:i,children:i?"Loading...":"Get Jokes"})}),i&&e.jsx(l,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(D,{})}),c&&e.jsx(u,{color:"error",variant:"subtitle1",sx:{mt:2},children:c}),!i&&!c&&h.length>0&&e.jsx(l,{children:h.map((a,s)=>e.jsx(l,{sx:{mb:3,border:"1px solid rgba(0,0,0,0.2)",p:2,borderRadius:1},children:a.type==="twopart"?e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"h6",sx:{mb:1},children:a.setup}),P[s]?e.jsx(u,{variant:"subtitle1",color:"text.secondary",children:a.delivery}):e.jsx(b,{variant:"outlined",onClick:()=>F(s),children:"Show Punchline"})]}):e.jsx(u,{variant:"h6",children:a.joke})},s))})]})}export{O as default};
